    
 # Clean up from any previous run of this file
  delete module flaviviridaeRaxmlPhylogenyGeneratorProt
  delete module alignmentColumnsSelectorFlaviPestiAa
  delete module alignmentColumnsSelectorHepaciPegiAa
  delete module alignmentColumnsSelectorFlaviLikeAa
  delete module alignmentColumnsSelectorPestiLikeAa
  
  # Create all the modules we need
  create module -f modules/core/flaviviridaeRaxmlPhylogenyGeneratorProt.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorFlaviPestiAa.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorHepaciPegiAa.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorFlaviLikeAa.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorPestiLikeAa.xml

  # Create the phylogenies
  module flaviviridaeRaxmlPhylogenyGeneratorProt

    generate amino-acid phylogeny AL_TREE_FlaviPesti -s alignmentColumnsSelectorFlaviPestiAa \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 40" \
      -o trees/major-lineage/major1_flavipesti-aa.tre NEWICK_BOOTSTRAPS

    generate amino-acid phylogeny AL_TREE_HepaPegi -s alignmentColumnsSelectorHepaciPegiAa \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 40" \
      -o trees/major-lineage/major1_hepapegi-aa.tre NEWICK_BOOTSTRAPS

    generate amino-acid phylogeny AL_TREE_FlaviLike -s alignmentColumnsSelectorFlaviLikeAa \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 40" \
      -o trees/major-lineage/major1_flavilike-aa.tre NEWICK_BOOTSTRAPS

    generate amino-acid phylogeny AL_TREE_PestiLike -s alignmentColumnsSelectorPestiLikeAa \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 40" \
      -o trees/major-lineage/major1_pestilike-aa.tre NEWICK_BOOTSTRAPS

    exit

