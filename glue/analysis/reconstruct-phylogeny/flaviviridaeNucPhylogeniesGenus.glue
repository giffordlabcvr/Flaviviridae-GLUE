
  # Clean up from any previous run of this file


  # Delete modules
  delete module flaviviridaeRaxmlPhylogenyGeneratorNucs
  delete module alignmentColumnsSelectorFlavivirus
  delete module alignmentColumnsSelectorTamanavirus
  delete module alignmentColumnsSelectorHepacivirus
  delete module alignmentColumnsSelectorPestivirus
  delete module alignmentColumnsSelectorPegivirus
  delete module alignmentColumnsSelectorPL1
  delete module alignmentColumnsSelectorPL2
  delete module alignmentColumnsSelectorJingmenvirus_Seg1
  delete module alignmentColumnsSelectorJingmenvirus_Seg3
  
  # Create all the modules we need
  create module -f modules/core/flaviviridaeRaxmlPhylogenyGeneratorNucs.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorFlavivirus.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorTamanavirus.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorHepacivirus.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorPestivirus.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorPL1.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorPL2.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorPegivirus.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorJingmenvirus_Seg1.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorJingmenvirus_Seg3.xml
  

  # Create the phylogenies
  module flaviviridaeRaxmlPhylogenyGeneratorNucs

    generate nucleotide phylogeny AL_TREE_Flavivirus -s alignmentColumnsSelectorFlavivirus \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 50" \
     -o trees/genus/flavivirus-nucs.tre NEWICK_BOOTSTRAPS

    #generate nucleotide phylogeny AL_TREE_Tamanavirus -s alignmentColumnsSelectorTamanavirus \
    #  -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 20" \
    #  -o trees/genus/tamanavirus-nucs.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_Jingmenvirus_Seg1 -s alignmentColumnsSelectorJingmenvirus_Seg1 \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 40" \
      -o trees/genus/jingmenvirus_seg1-nucs.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_Jingmenvirus_Seg3 -s alignmentColumnsSelectorJingmenvirus_Seg3 \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 40" \
      -o trees/genus/jingmenvirus_seg3-nucs.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_Pestivirus -s alignmentColumnsSelectorPestivirus \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 50" \
      -o trees/genus/pestivirus-nucs.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_Hepacivirus -s alignmentColumnsSelectorHepacivirus \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 50" \
      -o trees/genus/hepacivirus-nucs.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_Pegivirus -s alignmentColumnsSelectorPegivirus \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 50" \
      -o trees/genus/pegivirus-nucs.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_PL1 -s alignmentColumnsSelectorPL1 \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 10" \
      -o trees/genus/pl1-nucs.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_PL2 -s alignmentColumnsSelectorPL2 \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 10" \
      -o trees/genus/pl2-nucs.tre NEWICK_BOOTSTRAPS

    exit

