
  # Clean up from any previous run of this file
  

  # Delete modules
  delete module raxmlPhylogenyGenerator
  delete module alignmentColumnsSelectorFlavivirus
  delete module alignmentColumnsSelectorTamanavirus
  delete module alignmentColumnsSelectorPL1
  delete module alignmentColumnsSelectorJingmenvirus_Seg1
  delete module alignmentColumnsSelectorJingmenvirus_Seg3
  
  # Create all the modules we need
  create module -t raxmlPhylogenyGenerator
  create module -f modules/core/phylogeny/alignmentColumnsSelectorFlavivirus.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorTamanavirus.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorPL1.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorPL2.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorJingmenvirus_Seg1.xml
  create module -f modules/core/phylogeny/alignmentColumnsSelectorJingmenvirus_Seg3.xml


  # Create the phylogenies
  module raxmlPhylogenyGenerator

    generate nucleotide phylogeny AL_TREE_Flavivirus -s alignmentColumnsSelectorFlavivirus \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 5" \
      -o trees/genus/flavivirus-efv.tre NEWICK_BOOTSTRAPS

    #generate nucleotide phylogeny AL_TREE_Tamanavirus -s alignmentColumnsSelectorTamanavirus \
    #  -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 5" \
    #  -o trees/genus/tamanavirus-efv.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_Jingmenvirus_Seg1 -s alignmentColumnsSelectorJingmenvirus_Seg1 \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 40" \
      -o trees/genus/jingmenvirus_seg1-efv.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_Jingmenvirus_Seg3 -s alignmentColumnsSelectorJingmenvirus_Seg3 \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 40" \
      -o trees/genus/jingmenvirus_seg3-efv.tre NEWICK_BOOTSTRAPS

    generate nucleotide phylogeny AL_TREE_PL2 -s alignmentColumnsSelectorPL2 \
      -w "fLocNotes.featureLoc.feature.name = 'whole_genome' and fLocNotes.ref_nt_coverage_pct >= 10" \
      -o trees/genus/pl2-efv.tre NEWICK_BOOTSTRAPS

    exit

